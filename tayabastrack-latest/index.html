<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TayabaStrack - Public Dashboard</title>

  <!-- Firebase -->
  <script type="module">
    // Import Firebase SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    // Your Firebase configuration
     const firebaseConfig = {
    apiKey: "AIzaSyB06vfES5thZQi3Yd11vkooHVH-d5d4Y3o",
    authDomain: "tayabastrack-23b95.firebaseapp.com",
    projectId: "tayabastrack-23b95",
    storageBucket: "tayabastrack-23b95.appspot.com",
    messagingSenderId: "674055915366",
    appId: "1:674055915366:web:aa560336c1f8b504eeaaa7"
  };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Function to render posts
    const newsContainer = document.getElementById("newsContainer");

    function renderBulletins(snapshot) {
      newsContainer.innerHTML = ""; // clear previous content
      snapshot.forEach(doc => {
        const data = doc.data();
        const card = document.createElement("div");
        card.classList.add("card");
        card.innerHTML = `
          <img src="${data.imageURL || 'https://via.placeholder.com/300x200'}" alt="issue image">
          <h3>Barangay: ${data.barangay || 'N/A'}</h3>
          <p><strong>Issue:</strong> ${data.issue || 'No issue stated'}</p>
          <p><strong>Date:</strong> ${data.date || 'N/A'}</p>
        `;
        newsContainer.appendChild(card);
      });
    }

    // Listen for real-time updates
    onSnapshot(collection(db, "ad_bulletin"), renderBulletins);
  </script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6fb;
      margin: 0;
      padding: 0;
    }

    header {
      background: white;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 15px 25px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    header h1 {
      color: #2164f3;
      font-size: 1.3rem;
    }

    .login-btn {
      background: #2164f3;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 8px 15px;
      cursor: pointer;
    }

    .container {
      margin: 20px auto;
      padding: 20px;
      max-width: 1200px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    h2 {
      margin-bottom: 15px;
    }

    .news-grid {
      display: flex;
      gap: 20px;
      overflow-x: auto;
      padding-bottom: 10px;
    }

    .news-grid::-webkit-scrollbar {
      height: 8px;
    }
    .news-grid::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    .card {
      flex: 0 0 300px;
      background: #fafafa;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      overflow: hidden;
      transition: transform 0.2s;
    }
    .card:hover {
      transform: scale(1.03);
    }
    .card img {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }
    .card h3, .card p {
      margin: 10px 15px;
    }
  </style>
</head>

<body>
  <header>
    <h1>TayabaStrack</h1>
    <a href="index.html" class="login-btn" style="
    background: #2164f3;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 8px 15px;
    cursor: pointer;
    text-decoration: none;
    display: inline-block;
">Login</a>

  </header>

  <div class="container">
    <h2>NEWS / UPDATES</h2>
    <div id="newsContainer" class="news-grid">
      <!-- Posts appear here dynamically -->
    </div>
  </div>
</body>
</html>
